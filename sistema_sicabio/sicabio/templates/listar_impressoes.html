{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300" rel="stylesheet">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
{#        <link rel="stylesheet" href="{% static 'css/cad_p.css' %}">#}
{#            <link rel="stylesheet" href="{% static 'css/upload.css' %}">#}

    <title>PACIENTES</title>
</head>

<body>
<style>

    body {
  background: whitesmoke;
  font-family: "Open Sans", sans-serif;
}
#cont {
  max-width: 960px;
  margin: 30px auto;
  padding: 20px;
}
#drop-cont {
  max-width: 960px;
  margin: 30px auto;
  padding: 20px;
}
h1 {
  font-size: 20px;
  text-align: center;
  margin: 20px 0 20px;
}
h1 small {
  display: block;
  font-size: 15px;
  padding-top: 8px;
  color: gray;
}
/* The container <div> - needed to position the dropup content */
.dropup {
  position: relative;
  display: inline-block;
}

/* Dropup content (Hidden by Default) */
.dropup-content {
  display: none;
  position: absolute;
  bottom: 50px;
  background-color: #f1f1f1;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

/* Links inside the dropup */
.dropup-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
}

/* Change color of dropup links on hover */
.dropup-content a:hover {background-color: #ddd}

/* Show the dropup menu on hover */
.dropup:hover .dropup-content {
  display: block;
}

/* Change the background color of the dropup button when the dropup content is shown */
.dropup:hover .dropbtn {
  background-color: #2980B9;
}

</style>
{% include 'navbar.html' %}

 <div class="container" style="position: relative;margin-left:200px; "id="cont">
 <div id="top" class="container" style="position: relative;top:20px;margin: 0;border: solid #d32f2f;left: 800px;">

        <button class="btn btn-primary js-create-paciente" type="button"
                                                id='CadPaciente' data-target="#myModal" data-toggle="modal"
                                                data-url="{% url 'create-paciente' %}">Realizar Análise Dermatoglífica</button>
 </div>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb" style="background-color:#F5F5F5">
            <li class="breadcrumb-item "><a href="../../../pacientes"> Pacientes</a></li>
            <li class="breadcrumb-item active" aria-current="page">Análise de Impressões Digitais</li>
        </ol>
    </nav>

  <div class="row">

             {% for i in impressao %}

            <div class="col-sm-3">
                <div class="card">
                   <div class="container" id="drop-cont">
                       <div class="dropup">
                       <i class="fas fa-ellipsis-v " onclick="myFunction()" id="dropbtn" style="left: 152px;position: relative;bottom: 30px;" ></i>
                        <div class="dropup-content">
                        <a href="#home">Alterar imagem</a>
                        <a href="#about">Excluir</a>
                        </div>
                       </div>
                           <a class="img" href="../impressoes/detalhes_impressao/{{i.id}}"> <img src="{{i.image_url}}" style="width:100%;"> </a>
                   </div>
                </div>


            </div>

         {% endfor %}
        </div>



    </div>

{##}
{#{% empty %}#}
{#    <tr>#}
{#        <td colspan="7" class="text-center">Não existem impressões</td>#}
{#    </tr>#}




    </div>

 </div>
</body>
</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
{% block javascript %}
    <script src="{% static 'js/jQuery-File-Upload/js/vendor/jquery.ui.widget.js' %}"></script>
    <script src="{% static 'js/jQuery-File-Upload/js/jquery.iframe-transport.js' %}"></script>
    <script src="{% static 'js/jQuery-File-Upload/js/jquery.fileupload.js' %}"></script>
    <script>
    function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}

// Close the dropdown if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches('#dropbtn')) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
        function form(event) {
            event.preventDefault();
            var form = new FormData($('.form').get(0));

            $.ajax({
                url: '{% url "basic_upload" paciente.id %}',
                type: $(this).attr('method'),
                data: form,
                dataType: 'json',
                cache: false,
                processData: false,
                contentType: false,
                success: function (data) {
                    if (data.form_is_valid) {
                        $("#fileTable tbody").html(data.html_impressao_list);

                        alert('Arquivo Salvo');
                    } else {
                        alert('ERROR');
                    }

                },
                statusCode: {
                    500: function () {
                        alert('Problema no Upload')
                    }
                }
            });
            return false;
        }

        $(function () {
            $('.form').submit(form);
        });


         </script>




{% endblock %}